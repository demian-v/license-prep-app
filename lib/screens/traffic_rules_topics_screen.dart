import 'package:flutter/material.dart';
import '../models/traffic_rule_topic.dart';
import 'traffic_rule_content_screen.dart';

class TrafficRulesTopicsScreen extends StatelessWidget {
  final List<TrafficRuleTopic> topics = [
    TrafficRuleTopic(
      id: '1',
      title: 'Загальні положення',
      content: '1. ЗАГАЛЬНІ ПОЛОЖЕННЯ\n\n'
          '1.1 Водійське посвідчення в Іллінойсі\n\n'
          'Водійське посвідчення — це ваш дозвіл на керування транспортним засобом. У штаті Іллінойс посвідчення класифікується за типом транспортного засобу на основі повної ваги автомобіля. Базове посвідчення для керування легковим автомобілем у штаті Іллінойс відноситься до класу D.\n\n'
          '1.2 Вікові обмеження\n\n'
          '• Ви повинні бути не молодше 16 років для отримання посвідчення водія в Іллінойсі.\n\n'
          '• Якщо вам 16-17 років, ви можете отримати посвідчення тільки після успішного завершення схваленого штатом курсу навчання водіїв, 50 годин практичного водіння та складання іспитів.\n\n'
          '• Для осіб віком 18-20 років, які раніше не мали посвідчення, необхідно пройти 6-годинний курс навчання дорослих водіїв.\n\n'
          '• Водії молодше 18 років не можуть керувати комерційними транспортними засобами.\n\n'
          '• Водії молодше 21 року не можуть керувати транспортними засобами, що перевозять більше 10 пасажирів, автобусами релігійних організацій, шкільними автобусами чи транспортом для перевезення людей похилого віку.\n\n'
          '1.3 Процес отримання посвідчення\n\n'
          'Для отримання водійського посвідчення необхідно:\n\n'
          '• Пройти перевірку зору\n\n'
          '• Скласти письмовий іспит\n\n'
          '• Скласти практичний іспит з водіння\n\n'
          '• Подати необхідні документи, що засвідчують особу\n\n'
          '• Сплатити відповідні збори\n\n'
          '1.4 Типи документів ідентифікації\n\n'
          'З 2025 року для внутрішніх авіаперельотів потрібне водійське посвідчення або ID-картка, що відповідає вимогам REAL ID. Щоб отримати REAL ID, потрібно надати:\n\n'
          '• Підтвердження особи (наприклад, свідоцтво про народження або дійсний паспорт США)\n\n'
          '• Підтвердження номера соціального страхування\n\n'
          '• Підтвердження поточного місця проживання (два документи)\n\n'
          '• Підтвердження підпису',
    ),
    TrafficRuleTopic(
      id: '2',
      title: 'Обов\'язки і права водіїв механічних транспортних засобів',
      content:
          '2. ОБОВ\'ЯЗКИ І ПРАВА ВОДІЇВ МЕХАНІЧНИХ ТРАНСПОРТНИХ ЗАСОБІВ\n\n'
          '2.1 Основні обов\'язки водія\n\n'
          '• Виконувати всі дорожні знаки та сигнали\n\n'
          '• Підкорятися вказівкам працівників поліції, пожежників та осіб, що регулюють рух\n\n'
          '• Завжди бути уважним за кермом та готовим реагувати на зміни ситуації\n\n'
          '• Утримуватись від відволікаючих дій за кермом, особливо використання мобільних телефонів\n\n'
          '• Дотримуватись швидкісного режиму та правил дорожнього руху\n\n'
          '2.2 Правильні дії при зупинці поліцією\n\n'
          '• Повільно зупиніть своє авто на узбіччі, уникаючи різкого гальмування\n\n'
          '• Тримайте руки на кермі, де їх добре видно\n\n'
          '• Не виходьте з автомобіля, якщо вас про це не попросять\n\n'
          '• Негайно повідомте офіцера, якщо маєте зброю\n\n'
          '• Виконуйте законні вимоги офіцера\n\n'
          '2.3 Заборона відволікаючих факторів\n\n'
          'Закон Іллінойсу забороняє:\n\n'
          '• Використання ручних мобільних телефонів під час керування\n\n'
          '• Написання та читання текстових повідомлень за кермом\n\n'
          '• Перегляд відео чи участь у відеоконференціях\n\n'
          '• Використання соціальних мереж під час керування автомобілем\n\n'
          '2.4 Правила паркування\n\n'
          'При паркуванні на пагорбі:\n\n'
          '• Якщо автомобіль стоїть на спуску: поверніть передні колеса в бік бордюру\n\n'
          '• Якщо автомобіль стоїть на підйомі з бордюром: поверніть колеса від бордюру\n\n'
          '• Якщо автомобіль стоїть на пагорбі без бордюру: поверніть колеса вправо\n\n'
          '• Завжди користуйтесь ручним гальмом і переводьте коробку передач у положення "Парк"',
    ),
    TrafficRuleTopic(
      id: '3',
      title: 'Рух транспортних засобів із спеціальними сигналами',
      content: '3. РУХ ТРАНСПОРТНИХ ЗАСОБІВ ІЗ СПЕЦІАЛЬНИМИ СИГНАЛАМИ\n\n'
          '3.1 Дії при наближенні автомобілів екстрених служб\n\n'
          '• При наближенні транспорту з увімкненими звуковими та світловими сигналами необхідно негайно зупинитись біля правого краю дороги\n\n'
          '• Якщо ви зупинились на перехресті, залишайтесь на місці до проїзду автомобіля екстрених служб\n\n'
          '• Забороняється їхати по пожежних рукавах, крім випадків, коли це дозволено керівником операції\n\n'
          '• При наближенні до нерухомого автомобіля екстрених служб з увімкненими сигналами необхідно змінити смугу або сповільнитись\n\n'
          '3.2 Правила проїзду біля шкільних автобусів\n\n'
          '• Обов\'язково зупинитись при наближенні до шкільного автобуса з увімкненими червоними сигналами та висунутим знаком "STOP"\n\n'
          '• На двосмуговій дорозі автомобілі, що рухаються в обох напрямках, повинні зупинитись\n\n'
          '• На чотирисмуговій дорозі зупинитись повинні лише автомобілі, що рухаються в тому ж напрямку, що й автобус\n\n'
          '• Штраф за проїзд повз зупинений шкільний автобус — \$300, плюс можливе призупинення дії посвідчення водія\n\n'
          '3.3 Зони дорожніх робіт\n\n'
          '• При наближенні до зони дорожніх робіт обов\'язково сповільніть рух\n\n'
          '• Припиніть використання мобільних телефонів\n\n'
          '• Змініть смугу руху, якщо це можливо, щоб віддалитись від робітників\n\n'
          '• Дотримуйтесь встановлених обмежень швидкості 24 години на добу, 7 днів на тиждень\n\n'
          '• Штрафи в зонах дорожніх робіт подвоюються\n\n'
          '3.4 Похоронні процесії\n\n'
          '• Необхідно поступатися дорогою всім транспортним засобам у складі похоронної процесії\n\n'
          '• Заборонено вклинюватись між автомобілями похоронної процесії\n\n'
          '• Заборонено обганяти автомобілі, що знаходяться в похоронній процесії\n\n'
          '• Автомобілі в похоронній процесії рухаються з увімкненими фарами та аварійними сигналами',
    ),
    TrafficRuleTopic(
      id: '4',
      title: 'Обов\'язки і права пішоходів',
      content: '4. ОБОВ\'ЯЗКИ І ПРАВА ПІШОХОДІВ\n\n'
          '4.1 Правила для пішоходів\n\n'
          '• Пішоходи повинні використовувати тротуар, коли він доступний\n\n'
          '• За відсутності тротуару пішоходи повинні рухатись узбіччям якомога далі від проїжджої частини\n\n'
          '• На двосторонній дорозі пішоходи повинні рухатись назустріч транспорту\n\n'
          '• Заборонено ходити по дорозі у стані алкогольного чи наркотичного сп\'яніння\n\n'
          '4.2 Перехід дороги\n\n'
          '• Пішоходи повинні користуватись позначеними пішохідними переходами, коли такі є\n\n'
          '• На регульованих перехрестях пішоходи повинні дотримуватись сигналів "Walk" та "Don\'t Walk"\n\n'
          '• На нерегульованих перехрестях водії зобов\'язані поступатися пішоходам\n\n'
          '• Заборонено виходити на дорогу раптово, створюючи небезпеку для руху\n\n'
          '4.3 Особи з обмеженими можливостями\n\n'
          '• Пішоходи з інвалідністю, які використовують собаку-поводиря, білу тростину, інвалідний візок або інші допоміжні пристрої, мають право першочергового проїзду\n\n'
          '• Водії повинні бути особливо уважними при наближенні до місць, де можуть знаходитись люди з обмеженими можливостями\n\n'
          '• Заборонено зупинятись на пішохідних переходах, блокуючи рух людей з інвалідністю\n\n'
          '4.4 Бігуни та пішоходи\n\n'
          '• Бігуни повинні користуватись спеціальними доріжками для бігу, коли такі є\n\n'
          '• На дорогах загального користування бігуни повинні вибирати широкі дороги з хорошими узбіччями\n\n'
          '• Бігуни повинні рухатись проти потоку транспорту і бути уважними\n\n'
          '• У темний час доби або при поганій видимості бігуни повинні носити світловідбиваючий одяг',
    ),
    TrafficRuleTopic(
      id: '5',
      title: 'Обов\'язки і права пасажирів',
      content: '5. ОБОВ\'ЯЗКИ І ПРАВА ПАСАЖИРІВ\n\n'
          '5.1 Використання ременів безпеки\n\n'
          '• Закон штату Іллінойс вимагає, щоб усі водії та пасажири (на передньому та задньому сидіннях) віком від 8 років і старші були пристебнуті ременями безпеки\n\n'
          '• Якщо пасажир має інвалідність або медичний стан, що не дозволяє користуватись ременем безпеки, водій відповідає за пристібання та регулювання ременя безпеки цього пасажира\n\n'
          '• Відповідальність за дотримання закону про ремені безпеки лежить на водієві\n\n'
          '5.2 Правильне розташування ременя безпеки\n\n'
          '• Поясний ремінь повинен проходити через стегна, а не через живіт\n\n'
          '• Плечовий ремінь має бути досить щільним, але не заважати керуванню\n\n'
          '• Ніколи не розташовуйте плечовий ремінь за спиною або під рукою\n\n'
          '5.3 Перевезення дітей\n\n'
          '• Діти до 8 років повинні перевозитись у відповідних дитячих кріслах\n\n'
          '• Діти до 2 років повинні перевозитись у кріслах, встановлених проти напрямку руху\n\n'
          '• Дитячі крісла-бустери повинні використовуватись лише з ременями безпеки, що мають як поясний, так і плечовий ремінь\n\n'
          '• Дітям до 13 років рекомендується подорожувати на задньому сидінні\n\n'
          '5.4 Повітряні подушки безпеки\n\n'
          '• Повітряні подушки призначені для додаткового захисту разом з ременями безпеки\n\n'
          '• Рекомендована відстань між водієм і повітряною подушкою - 25-30 см\n\n'
          '• Дитячі крісла, встановлені проти напрямку руху, ніколи не повинні розміщуватися на передньому сидінні з активною подушкою безпеки',
    ),
    TrafficRuleTopic(
      id: '6',
      title: 'Вимоги до велосипедистів та мотоциклістів',
      content: '6. ВИМОГИ ДО ВЕЛОСИПЕДИСТІВ ТА МОТОЦИКЛІСТІВ\n\n'
          '6.1 Правила для велосипедистів\n\n'
          '• Велосипедисти мають ті ж права і обов\'язки, що й інші учасники дорожнього руху\n\n'
          '• Велосипедисти повинні рухатись у тому ж напрямку, що й транспортний потік\n\n'
          '• Велосипедисти повинні рухатись якомога правіше, але можуть зміщуватись до центру смуги при небезпечних умовах\n\n'
          '• Водії при обгоні велосипедиста повинні залишати відстань не менше 3 футів (1 метра)\n\n'
          '6.2 Правила безпеки для мотоциклістів\n\n'
          '• Мотоциклісти мають ті ж права і обов\'язки, що й інші учасники дорожнього руху\n\n'
          '• Мотоциклісти мають право використовувати всю ширину смуги руху\n\n'
          '• Мотоциклісти можуть проїхати на червоне світло, якщо воно не змінюється протягом 120 секунд, за умови, що вони поступаються дорогою іншим учасникам руху\n\n'
          '• Водії повинні бути особливо уважними на перехрестях, де відбувається більше 50% аварій за участю мотоциклів\n\n'
          '6.3 Електричні велосипеди та скутери\n\n'
          '• Низькошвидкісні електричні велосипеди повинні мати двигун потужністю менше 750 Вт\n\n'
          '• Електричні велосипеди можуть експлуатуватися на будь-яких дорогах і велосипедних доріжках\n\n'
          '• Їзда електричними велосипедами по тротуарах заборонена\n\n'
          '• Оператор електричного велосипеда класу 3 повинен бути не молодше 16 років\n\n'
          '6.4 Мопеди та скутери\n\n'
          '• Мопеди або скутери з двигуном менше 150 куб. см вимагають посвідчення водія класу L\n\n'
          '• Мопеди або скутери з двигуном 150 куб. см або більше вимагають посвідчення водія класу M\n\n'
          '• Мопед з двигуном, що не перевищує 50 куб. см, можна експлуатувати з будь-яким дійсним посвідченням водія Іллінойсу\n\n'
          '• Низькошвидкісні електричні скутери повинні важити менше 100 фунтів (45 кг) і не перевищувати швидкість 10 миль/год (16 км/год)',
    ),
    TrafficRuleTopic(
      id: '7',
      title: 'Дорожні знаки та сигнали',
      content: '7. ДОРОЖНІ ЗНАКИ ТА СИГНАЛИ\n\n'
          '7.1 Форми та кольори знаків\n\n'
          '• Восьмикутник (червоний): зупинка\n\n'
          '• Трикутник (червоний з білим): поступитися дорогою\n\n'
          '• Ромб (жовтий): попередження\n\n'
          '• Прямокутник (білий): регулювальні знаки\n\n'
          '• Прямокутник (зелений): вказівні знаки\n\n'
          '• П\'ятикутник (жовтий або жовто-зелений): шкільна зона\n\n'
          '• Коло (жовтий): залізничний переїзд попереду\n\n'
          '7.2 Світлофори\n\n'
          '• Червоне світло: повна зупинка\n\n'
          '• Жовте світло: попередження про зміну сигналу з зеленого на червоний\n\n'
          '• Зелене світло: можна їхати після надання переваги пішоходам і транспортним засобам на перехресті\n\n'
          '• Червона стрілка: не можна їхати в напрямку стрілки до появи зеленого сигналу\n\n'
          '• Зелена стрілка: можна їхати в напрямку стрілки після надання переваги\n\n'
          '7.3 Залізничні переїзди\n\n'
          '• При наближенні до залізничного переїзду необхідно сповільнити рух і перевірити наявність потягів\n\n'
          '• Якщо увімкнені червоні сигнали або опущений шлагбаум, необхідно зупинитись на відстані 15-50 футів (5-15 метрів) від найближчої рейки\n\n'
          '• Заборонено обходити шлагбаум або ігнорувати сигнали\n\n'
          '• Після проходження потяга переконайтесь у відсутності інших потягів, перш ніж продовжити рух\n\n'
          '7.4 Дорожня розмітка\n\n'
          '• Біла розмітка відокремлює потоки руху в одному напрямку\n\n'
          '• Жовта розмітка відокремлює потоки руху в протилежних напрямках\n\n'
          '• Суцільна лінія: заборонено перетинати\n\n'
          '• Переривчаста лінія: перетин дозволено при дотриманні безпеки\n\n'
          '• Подвійна суцільна жовта лінія: заборонено обгін з обох сторін',
    ),
    TrafficRuleTopic(
      id: '8',
      title: 'Керування в складних умовах',
      content: '8. КЕРУВАННЯ В СКЛАДНИХ УМОВАХ\n\n'
          '8.1 Водіння в тумані\n\n'
          '• Увімкніть ближнє світло фар або протитуманні фари\n\n'
          '• Сповільніть рух і збільшіть відстань до транспортного засобу попереду\n\n'
          '• Використовуйте розмітку дороги як орієнтир\n\n'
          '• За необхідності зупиніться в безпечному місці й чекайте покращення видимості\n\n'
          '• Не використовуйте дальнє світло фар, воно погіршує видимість у тумані\n\n'
          '8.2 Водіння під час дощу\n\n'
          '• Знизьте швидкість, щоб уникнути аквапланування\n\n'
          '• Увімкніть фари при використанні склоочисників (це вимагається законом Іллінойсу)\n\n'
          '• Збільшіть дистанцію до автомобіля попереду\n\n'
          '• Будьте особливо обережні на поворотах і при гальмуванні\n\n'
          '• Не проїжджайте через затоплені ділянки дороги\n\n'
          '8.3 Водіння в зимовий період\n\n'
          '• Рухайтесь повільніше та збільшуйте дистанцію до автомобіля попереду\n\n'
          '• Вимкніть круїз-контроль на мокрій, засніженій або обледенілій дорозі\n\n'
          '• Очистіть увесь сніг і лід з автомобіля перед початком руху\n\n'
          '• Обережно підходьте до мостів, затінених ділянок і естакад — вони можуть обмерзати раніше\n\n'
          '• Майте в автомобілі аварійний комплект (ковдра, їжа, лопата, тощо)\n\n'
          '8.4 Керування при засліпленні фарами\n\n'
          '• Переведіть погляд у правий бік дороги\n\n'
          '• Підтримуйте швидкість руху та положення на дорозі\n\n'
          '• Не дивіться прямо на фари зустрічного транспорту\n\n'
          '• Зменшіть яскравість власної панелі приладів\n\n'
          '• Якщо засліплення надто сильне, сповільніть рух або зупиніться в безпечному місці',
    ),
    TrafficRuleTopic(
      id: '9',
      title: 'Водіння в нетверезому стані (DUI)',
      content: '9. ВОДІННЯ В НЕТВЕРЕЗОМУ СТАНІ (DUI)\n\n'
          '9.1 Визначення DUI\n\n'
          '• Керування транспортним засобом з вмістом алкоголю в крові 0.08% або вище\n\n'
          '• Керування транспортним засобом при наявності ТГК (активного інгредієнту канабісу) 5 нанограмів або більше на мілілітр крові\n\n'
          '• Керування транспортним засобом під впливом будь-яких наркотичних речовин\n\n'
          '• Керування транспортним засобом під впливом медичних препаратів, що погіршують здатність керування\n\n'
          '9.2 Закон про непряму згоду\n\n'
          '• Отримуючи водійське посвідчення, ви автоматично погоджуєтесь на проходження тестів на алкоголь або наркотики\n\n'
          '• Відмова від тестування призводить до призупинення дії водійського посвідчення на 12 місяців\n\n'
          '• Для першого порушення відмова від тестування призводить до призупинення дії посвідчення на 1 рік\n\n'
          '• Для повторного порушення протягом 5 років відмова призводить до призупинення на 3 роки\n\n'
          '9.3 Наслідки DUI\n\n'
          '• Перше порушення: мінімум 1 рік позбавлення прав\n\n'
          '• Друге порушення протягом 20 років: мінімум 5 років позбавлення прав\n\n'
          '• Третє порушення: мінімум 10 років позбавлення прав\n\n'
          '• Четверте і наступні порушення: довічне позбавлення прав\n\n'
          '• Додаткові штрафи та можливе ув\'язнення\n\n'
          '9.4 Нульова толерантність\n\n'
          '• Для водіїв молодше 21 року заборонено керувати з будь-яким вмістом алкоголю в організмі\n\n'
          '• Порушення призводить до призупинення прав на мінімум 3 місяці\n\n'
          '• Відмова від тестування призводить до призупинення прав на мінімум 6 місяців\n\n'
          "• Для медичного використання канабісу також застосовується обмеження на керування у стані сп'яніння",
    ),
    TrafficRuleTopic(
      id: '10',
      title: 'Обов\'язкове страхування та відповідальність',
      content: "10. ОБОВ'ЯЗКОВЕ СТРАХУВАННЯ ТА ВІДПОВІДАЛЬНІСТЬ\n\n"
          "10.1 Вимоги до страхування\n\n"
          "• Усі автомобілі, що експлуатуються в Іллінойсі, повинні бути застраховані\n\n"
          "• Мінімальне страхове покриття відповідальності:\n"
          "  - \$25,000 за травму або смерть однієї особи\n"
          "  - \$50,000 за травму або смерть кількох осіб\n"
          "  - \$20,000 за пошкодження майна інших осіб\n\n"
          "• Водії повинні мати при собі підтвердження страхування\n\n"
          "10.2 Штрафи за відсутність страхування\n\n"
          "• Призупинення реєстрації автомобіля\n\n"
          "• Штраф мінімум \$500\n\n"
          "• Призупинення дії водійського посвідчення на 3 місяці\n\n"
          "• Обов'язкова подача доказів фінансової відповідальності (SR-22) на 3 роки\n\n"
          "10.3 Повідомлення про ДТП\n\n"
          "• Незалежно від вини, необхідно подати звіт про ДТП, якщо інцидент спричинив смерть, тілесні ушкодження або пошкодження майна понад \$1,500\n\n"
          "• Якщо транспортний засіб не застрахований, звіт подається при пошкодженні понад \$500\n\n"
          "• Водій має 30 хвилин на повідомлення про ДТП\n\n"
          "• Неповідомлення про ДТП може призвести до штрафу до \$2,500 та ув'язнення до 1 року\n\n"
          "10.4 Закон фінансової відповідальності\n\n"
          "• Якщо ви винні в ДТП і не маєте страхування, вам необхідно надати забезпечення (гарантію платежу) для покриття збитків потерпілої сторони\n\n"
          "• Невиконання вимог може призвести до призупинення дії водійського посвідчення\n\n"
          "• Права не будуть відновлені, доки особа не надасть доказів фінансової відповідальності\n\n"
          "• Необхідно підтримувати страхування протягом 3 років з дати першого подання доказів",
    ),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(
          'Правила дорожнього руху',
          style: TextStyle(fontWeight: FontWeight.bold),
        ),
        elevation: 0,
        backgroundColor: Theme.of(context).scaffoldBackgroundColor,
        foregroundColor: Colors.black,
        leading: IconButton(
          icon: Icon(Icons.arrow_back),
          onPressed: () {
            // Instead of popping, navigate to the home screen
            // This ensures we have a proper screen to go back to
            Navigator.of(context).pushNamedAndRemoveUntil('/home', (route) => false);
          },
        ),
        actions: [
          IconButton(
            icon: Icon(Icons.search),
            onPressed: () {
              // Search functionality
            },
          ),
        ],
      ),
      body: ListView.builder(
        itemCount: topics.length,
        itemBuilder: (context, index) {
          final topic = topics[index];
          return Card(
            margin: EdgeInsets.symmetric(horizontal: 16, vertical: 8),
            shape: RoundedRectangleBorder(
              borderRadius: BorderRadius.circular(16),
            ),
            child: InkWell(
              borderRadius: BorderRadius.circular(16),
              onTap: () {
                Navigator.push(
                  context,
                  MaterialPageRoute(
                    builder: (context) {
                      return TrafficRuleContentScreen(topic: topic);
                    },
                  ),
                );
              },
              child: Padding(
                padding: EdgeInsets.all(16),
                child: Row(
                  children: [
                    CircleAvatar(
                      backgroundColor: Colors.blue.shade100,
                      child: Text(
                        '${index + 1}',
                        style: TextStyle(
                          color: Colors.blue,
                          fontWeight: FontWeight.bold,
                        ),
                      ),
                    ),
                    SizedBox(width: 16),
                    Expanded(
                      child: Text(
                        topic.title,
                        style: TextStyle(
                          fontSize: 16,
                          fontWeight: FontWeight.w500,
                        ),
                      ),
                    ),
                  ],
                ),
              ),
            ),
          );
        },
      ),
    );
  }
}
